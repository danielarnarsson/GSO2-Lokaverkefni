CREATE DATABASE 1907002160_lokaverkefni;
USE 1907002160_lokaverkefni;

#1
CREATE TABLE MEMBERSHIP (
MEM_NUM INT PRIMARY KEY NOT NULL,
MEM_FNAME VARCHAR(32) NOT NULL,
MEM_LNAME VARCHAR(32) NOT NULL,
MEM_STREET VARCHAR(32) NOT NULL,
MEM_CITY VARCHAR(32) NOT NULL,
MEM_STATE CHAR(2) NOT NULL,
MEM_ZIP CHAR(5)NOT NULL,
MEM_BALANCE DECIMAL(5,2)
);

CREATE TABLE RENTAL (
RENT_NUM INT PRIMARY KEY NOT NULL,
RENT_DATE DATE,
MEM_NUM INT NOT NULL,
FOREIGN KEY (MEM_NUM) REFERENCES MEMBERSHIP(MEM_NUM)
);

CREATE TABLE PRICE (
PRICE_CODE VARCHAR(1) NOT NULL PRIMARY KEY,
PRICE_DESCRIPTION VARCHAR(100),
PRICE_RENTFEE INT NOT NULL,
PRICE_DAILYLATEFEE INT
);

CREATE TABLE MOVIE (
MOVIE_NUM INT NOT NULL PRIMARY KEY,
MOVIE_TITLE VARCHAR(255) NOT NULL,
MOVIE_YEAR YEAR,
MOVIE_COST DECIMAL(3,2) NOT NULL,
MOVIE_GENRE VARCHAR(100),
PRICE_CODE VARCHAR(1),
FOREIGN KEY (PRICE_CODE) REFERENCES PRICE(PRICE_CODE)
);

CREATE TABLE VIDEO (
VID_NUM INT NOT NULL PRIMARY KEY,
VID_INDATE DATE NOT NULL,
MOVIE_NUM INT NOT NULL,
FOREIGN KEY (MOVIE_NUM) REFERENCES MOVIE(MOVIE_NUM)
);

CREATE TABLE DETAILRENTAL (
RENT_NUM INT NOT NULL,
VID_NUM INT NOT NULL,
DETAIL_FEE DECIMAL(2,2),
DETAIL_DUEDATE DATE,
DETAIL_RETURNDATE DATE,
DETAIL_DAILYLATEFEE DECIMAL(5,2),
FOREIGN KEY (RENT_NUM) REFERENCES RENTAL(RENT_NUM),
FOREIGN KEY (VID_NUM) REFERENCES VIDEO(VID_NUM),
PRIMARY KEY (RENT_NUM, VID_NUM)
);



#2

INSERT INTO MEMBERSHIP (MEM_NUM,MEM_FNAME,MEM_LNAME,MEM_STREET, MEM_CITY,MEM_STATE,MEM_ZIP,MEM_BALANCE) VALUES
(102,'Tami','Dawson','2632 Takli Circle', 'Norene', 'TN', '37136', 11),
(103, 'Curt', 'Knight', '4025 Cornell Court', 'Flatgap', 'KY', '41219', 6),
(104, 'Jamal','Melendez', '788 East 145th Avenue', 'Quebeck', 'TN', '38579', 0),
(105, 'Iva','Mcclain', '6045 Musket Ball Circle', 'Summit', 'KY', '42783', 15),
(106,'Miranda', 'Parks', '4469 Maxwell Place', 'Germantown','TN', '38183', 0),
(107,'Rosario','Elliott','7578 Danner Avenue','Columbia','TN','38402',5),
(108,'Mattie','Guy','40390 Evergreen Street','Lily', 'KY', '40740', 0 ),
(109,'Clint','Ochoa', '1711 Elm Street', 'Greeneville','TN', '37745',10),
(110,'Lewis','Rosales','4524 Southwind Circle','Counce','TN','38326',0),
(111,'Stacy','Mann', '2789 East Cook Avenue','Murfreesboro', 'TN','37132',8),
(112, 'Luis', 'Trujillo', '7267 Melvin Avenue', 'Heiskell','TN','37754',3),
(113, 'Minnie','Gonzales','6430 Vasili Drive','Williston','TN','38076',0);

INSERT INTO RENTAL (RENT_NUM, RENT_DATE, MEM_NUM) VALUES
(1001,'2009-03-01',103),
(1002,'2009-03-01',105),
(1003,'2009-03-02',102),
(1004,'2009-03-02',110),
(1005,'2009-03-02',111),
(1006,'2009-03-02',107),
(1007,'2009-03-02',104),
(1008,'2009-03-03',105),
(1009,'2009-03-03',111);

INSERT INTO DETAILRENTAL VALUES
(1001,34342,2,'2009-03-04','2009-03-02',1),
(1001,61353,2,'2009-03-04','2009-03-03',1),
(1002,59237,3.5,'2009-03-04','2009-03-04',3),
(1003,54325,3.5,'2009-03-04','2009-03-09',3),
(1003,61369,2,'2009-03-06','2009-03-09',1),
(1003,61388,0,'2009-03-06','2009-03-09',1),
(1004,34341,2,'2009-03-07','2009-03-07',1),
(1004,34367,3.5,'2009-03-05','2009-03-07',3),
(1004, 44392,3.5,'2009-03-05','2009-03-07',3),
(1005,34342,2,'2009-03-07','2009-03-05',1),
(1005, 44397,3.5,'2009-03-05','2009-03-05',3),
(1006, 34366,3.5,'2009-03-05' ,'2009-03-04',3),
(1006,61367,2,'2009-03-07',null,1),
(1007,34368,3.5,'2009-03-05',null,3),
(1008,34369,3.5,'2009-03-05','2009-03-05',3),
(1009,54324 ,3.5,'2009-03-04',null,3);
#DROP DATABASE 1907002160_Lokaverkefni;

DROP DATABASE 1907002160_lokaverkefni;